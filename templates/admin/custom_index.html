<!-- templates/admin/index.html -->
{% extends "admin/index.html" %}

{% block content %}
<div style="margin-bottom: 30px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white;">
    <h2 style="margin-bottom: 10px;">ğŸ“Š Tableau de bord Nexus Shop</h2>
    <p style="opacity: 0.9;">Gestion de la plateforme e-commerce</p>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="color: #667eea; margin-bottom: 15px;">
            <i class="fas fa-users" style="margin-right: 10px;"></i>Utilisateurs
        </h3>
        <div style="font-size: 36px; font-weight: bold; color: #333;">{{ user_count|default:"0" }}</div>
        <a href="{% url 'admin:core_user_changelist' %}" style="display: inline-block; margin-top: 10px; color: #667eea; text-decoration: none;">
            Voir tous les utilisateurs â†’
        </a>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="color: #28a745; margin-bottom: 15px;">
            <i class="fas fa-shopping-cart" style="margin-right: 10px;"></i>Produits
        </h3>
        <div style="font-size: 36px; font-weight: bold; color: #333;">{{ product_count|default:"0" }}</div>
        <a href="{% url 'admin:core_product_changelist' %}" style="display: inline-block; margin-top: 10px; color: #28a745; text-decoration: none;">
            Voir tous les produits â†’
        </a>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="color: #ffc107; margin-bottom: 15px;">
            <i class="fas fa-box" style="margin-right: 10px;"></i>Commandes
        </h3>
        <div style="font-size: 36px; font-weight: bold; color: #333;">{{ order_count|default:"0" }}</div>
        <a href="{% url 'admin:core_order_changelist' %}" style="display: inline-block; margin-top: 10px; color: #ffc107; text-decoration: none;">
            Voir toutes les commandes â†’
        </a>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="color: #17a2b8; margin-bottom: 15px;">
            <i class="fas fa-chart-line" style="margin-right: 10px;"></i>Statistiques
        </h3>
        <div style="font-size: 36px; font-weight: bold; color: #333;">{{ revenue|default:"0" }}â‚¬</div>
        <p style="color: #666; margin-top: 10px; font-size: 14px;">Chiffre d'affaires total</p>
    </div>
</div>

<!-- Actions rapides -->
<div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 30px;">
    <h3 style="margin-bottom: 20px; color: #333;">ğŸš€ Actions rapides</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <a href="{% url 'admin:core_user_add' %}" style="display: block; padding: 15px; background: #f8f9fa; border-radius: 8px; text-decoration: none; color: #333; text-align: center; transition: transform 0.2s;">
            <i class="fas fa-user-plus" style="font-size: 24px; color: #667eea; margin-bottom: 10px;"></i><br>
            Ajouter un utilisateur
        </a>
        
        <a href="{% url 'admin:core_product_add' %}" style="display: block; padding: 15px; background: #f8f9fa; border-radius: 8px; text-decoration: none; color: #333; text-align: center; transition: transform 0.2s;">
            <i class="fas fa-plus-circle" style="font-size: 24px; color: #28a745; margin-bottom: 10px;"></i><br>
            Ajouter un produit
        </a>
        
        <a href="{% url 'admin:core_order_changelist' %}?status__exact=pending" style="display: block; padding: 15px; background: #f8f9fa; border-radius: 8px; text-decoration: none; color: #333; text-align: center; transition: transform 0.2s;">
            <i class="fas fa-clock" style="font-size: 24px; color: #ffc107; margin-bottom: 10px;"></i><br>
            Commandes en attente
        </a>
        
        <a href="{% url 'admin:core_category_add' %}" style="display: block; padding: 15px; background: #f8f9fa; border-radius: 8px; text-decoration: none; color: #333; text-align: center; transition: transform 0.2s;">
            <i class="fas fa-folder-plus" style="font-size: 24px; color: #17a2b8; margin-bottom: 10px;"></i><br>
            Ajouter une catÃ©gorie
        </a>
    </div>
</div>

{{ block.super }}
{% endblock %}

{% block sidebar %}
{{ block.super }}

<!-- Statistiques dÃ©taillÃ©es -->
<div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-top: 20px;">
    <h4 style="margin-bottom: 15px; color: #333;">ğŸ“ˆ Statistiques utilisateurs</h4>
    
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="color: #666;">Nouveaux (7j)</span>
            <span style="font-weight: bold; color: #667eea;">{{ new_users_7d|default:"0" }}</span>
        </div>
        <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
            <div style="height: 100%; background: #667eea; width: {% widthratio new_users_7d 100 100 %}%;"></div>
        </div>
    </div>
    
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="color: #666;">Utilisateurs actifs</span>
            <span style="font-weight: bold; color: #28a745;">{{ active_users|default:"0" }}</span>
        </div>
        <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
            <div style="height: 100%; background: #28a745; width: {% widthratio active_users total_users 100 %}%;"></div>
        </div>
    </div>
    
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="color: #666;">Staff</span>
            <span style="font-weight: bold; color: #ffc107;">{{ staff_users|default:"0" }}</span>
        </div>
        <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
            <div style="height: 100%; background: #ffc107; width: {% widthratio staff_users total_users 100 %}%;"></div>
        </div>
    </div>
</div>

<!-- Derniers utilisateurs inscrits -->
<div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-top: 20px;">
    <h4 style="margin-bottom: 15px; color: #333;">ğŸ‘¥ Derniers inscrits</h4>
    <ul style="list-style: none; padding: 0; margin: 0;">
        {% for user in latest_users|slice:":5" %}
        <li style="padding: 10px 0; border-bottom: 1px solid #eee; display: flex; align-items: center;">
            <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; margin-right: 10px; font-size: 12px;">
                {{ user.first_name|first|default:user.username|first|upper }}
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 500;">{{ user.first_name|default:user.username }}</div>
                <div style="font-size: 12px; color: #666;">{{ user.date_joined|date:"d/m/Y" }}</div>
            </div>
            <a href="{% url 'admin:core_user_change' user.id %}" style="color: #667eea; text-decoration: none;">
                <i class="fas fa-edit"></i>
            </a>
        </li>
        {% empty %}
        <li style="padding: 10px 0; color: #666; text-align: center;">
            Aucun utilisateur rÃ©cent
        </li>
        {% endfor %}
    </ul>
    <a href="{% url 'admin:core_user_changelist' %}" style="display: block; text-align: center; margin-top: 15px; color: #667eea; text-decoration: none;">
        Voir tous les utilisateurs â†’
    </a>
</div>
{% endblock %}